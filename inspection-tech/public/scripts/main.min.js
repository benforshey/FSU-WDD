"use strict";function ready(e){"loading"!=document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",function(){"loading"!=document.readyState&&e()})}var readyWrap=function(){function e(e){b.dataset.id=e._id,X(e._id),function(){document.querySelector(".company_name").innerHTML=e.company.name,document.querySelector(".company_tagline").innerHTML=e.company.tagline,document.querySelector(".company_url").innerHTML=e.company.url}(),function(){document.querySelector(".inspector_name").children[1].innerHTML=e.inspector.name,document.querySelector(".inspector_phone").children[1].innerHTML=e.inspector.phone,document.querySelector(".inspector_email").children[1].innerHTML=e.inspector.email}(),function(){document.querySelector(".customer_inspectionType").innerHTML=e.customer.inspectionType,document.querySelector(".customer_inspectionDate").innerHTML=e.customer.inspectionDate,document.querySelector(".customer_site").children[1].innerHTML=e.customer.inspectionSite,document.querySelector(".customer_name").children[1].innerHTML=e.customer.name,document.querySelector(".customer_agent").children[1].innerHTML=e.customer.agent}(),function t(){for(var t=document.querySelectorAll(".summary_paragraph"),n=0;n<e.summary.length;n+=1)t[n].innerHTML=e.summary[n]}(),function(){document.querySelector(".table_quantity").innerHTML=e.invoice.quantity,document.querySelector(".table_item").innerHTML=e.invoice.item,document.querySelector(".table_price").innerHTML=e.invoice.price}(),function n(){for(var n=document.getElementsByClassName("legal_paragraph"),t=n.length,i=0;t>i;i+=1)n[i].innerHTML=e.legal[i]}()}var t=new PouchDB("reports"),n=new PouchDB("http://localhost:5984/integrous_web/"),i=document.getElementsByClassName("table_reportSelect"),o=document.getElementsByClassName("table_reportSelect__all")[0],r=document.getElementsByClassName("reportActions__create")[0],a=new Date,s=(a.getDate(),a.getMonth()),c=(a.getYear(),document.getElementsByClassName("select__day")[0]),l=document.getElementsByClassName("reportActions__delete")[0],d=document.getElementsByClassName("select__month")[0],u=document.getElementsByClassName("reportDisplay_open"),m={abnormality:{"break":{slight:{description:"The break is a small hole with some aggregate showing.",recommendation:"I recommend re-inspecting twice a year or just repairing the hole now. It will worsen over time."},moderate:{description:"The break is a medium hole with a void under the pipe.",recommendation:"I recommend repairing the pipe now, as sewage is leaking into the ground and washing away the soil underneath the pipe."},severe:{description:"The break is a large hole with a void under the pipe.",recommendation:"I recommend repairing the pipe now, as sewage is leaking into the ground and washing away the soil underneath the pipe."}},buildup:{slight:{description:"The buildup reduces less than 25% of the pipe&rsquo;s capacity.",recommendation:"I recommend that nothing but toilet paper enter the line. Grease and oils contribute to buildups, as do products such as flushable wipes and feminine hygiene products. I would reinspect again in a few years to monitor the buildup&rsquo;s severity."},moderate:{description:"The buildup reduces 25%&ndash;50% of the pipe&rsquo;s capacity.",recommendation:"I recommend that the pipe be snaked or jetted to restore the side sewer&rsquo;s full functionality. I also recommend that nothing but toilet paper enter the line. Grease and oils contribute to buildups, as do products such as flushable wipes and feminine hygiene products."},severe:{description:"The buildup reduces greater than 50% of the pipe&rsquo;s capacity.",recommendation:"I recommend that the pipe be snaked or jetted to restore the side sewer&rsquo;s full functionality. I also recommend that nothing but toilet paper enter the line. Grease and oils contribute to buildups, as do products such as flushable wipes and feminine hygiene products."}},corrosion:{slight:{description:"The corrosion is without evidence of a break and causes less than 25% reduction in the pipe&rsquo;s capacity.",recommendation:"I recommend re-inspecting the side sewer line every few years to monitor the progression of the corrosion."},moderate:{description:"The corrosion is without evidence of a break and causes a 25%&ndash;50% reduction in the pipe&rsquo;s capacity.",recommendation:"I recommend having the pipe cleaned out (snaking or jetting) and reinspected to determine the condition of the underlying material."},severe:{description:"The corrosion is without evidence of a break and causes a greater than 50% reduction in the pipe&rsquo;s capacity.",recommendation:"I recommend having the pipe cleaned out (snaking or jetting) and reinspected to determine the condition of the underlying material."}},erosion:{slight:{description:"The concrete aggregate is beginning to show through.",recommendation:"I recommend that you re-inspect the pipe every few years to monitor the erosion&rsquo;s progression."},moderate:{description:"The concrete aggregate is showing through, and the interior surface of the pipe is bumpy.",recommendation:"I recommend that you re-inspect the pipe every year to monitor the erosion&rsquo;s progression."},severe:{description:"The concrete aggregate is plainly visible, the interior surface is very bumpy, and pits in the pipe&rsquo;s structure are visible.",recommendation:"I recommend that you replace the pipe very soon, as the erosion will accelerate and sewage will leak into the soil."}},"foreign object":{slight:{description:"The foreign object doesn&rsquo;t effect the overall function of the side sewer line.",recommendation:"There's no need to remove the foreign object, as it does not effect the overall function of the sewer line."},moderate:{description:"The foreign object is hindering the overall function of the side sewer line.",recommendation:"I recommend that you have the foreign object removed."},severe:{description:"The foreign object seriously impedes the overall function of the side sewer line.",recommendation:"I recommend that you have the foreign object removed."}},fracture:{slight:{description:"The fractures are slight have no effect on the side sewer&rsquo;s function.",recommendation:"I recommend that you inspect the pipe again in few years to determine if the fracturing is becoming more severe."},moderate:{description:"The fractures are moderate and may or may not be effecting the side sewer&rsquo;s function.",recommendation:"I recommend that you inspect the pipe again every two years to monitor the condition of the fracturing."},severe:{description:"The fractures are severe and have compromised the integrity of the side sewer.",recommendation:"I recommend that you replace the damaged section of the side sewer."}},"low area":{slight:{description:"The low area retains less than 25% of the pipe&rsquo;s diameter.",recommendation:"Buildups may occur but are not likely to effect the overall function of the side sewer line. I recommend that nothing but toilet paper enter the line, as flushable wipes and feminine hygiene products may contribute to a buildup."},moderate:{description:"The low area retains 25%&ndash;50% of the pipe&rsquo;s diameter.",recommendation:"Buildups will likely occur and may be severe enough to effect the overall function of the side sewer line. I recommend that nothing but toilet paper enter the line, as flushable wipes and feminine hygiene products will contribute to a buildup."},severe:{description:"The low area retains greater than 50% of the pipe&rsquo;s diameter.",recommendation:"Buildups will likely occur and will likely effect the overall function of the side sewer line. I recommend that the low area be repaired."}},offset:{slight:{description:"The pipe is slightly offset and is very unlikely to effect the function of the side sewer. No soil is visible.",recommendation:"No action is needed for this slight offset."},moderate:{description:"The pipe is moderately offset but is unlikely to effect the function of the side sewer since no soil is visible at the joint.",recommendation:"I recommend that you inspect the pipe again in a few years to see if the offset has shifted."},severe:{description:"The pipe is severely offset, causing a break in the integrity of the side sewer. Soil is visible.",recommendation:"I recommend having this offset joint repaired."}},"root intrusion":{slight:{description:"The roots block less than 25% of the pipe&rsquo;s capacity.",recommendation:"I recommend that you have the root treated with a foaming herbicide like RootX."},moderate:{description:"The roots block between 25%&ndash;50% of the pipe&rsquo;s capacity.",recommendation:"I recommend that you have the pipe cleaned (snaked or jetted) then regularly treated with a foaming herbicide like RootX."},severe:{description:"The roots block less than 25% of the pipe&rsquo;s capacity.",recommendation:"I recommend that you have the pipe cleaned (snaked or jetted) then regularly treated with a foaming herbicide like RootX."}}},composition:{"access point":{basement:"I accessed the side sewer line from the basement cleanout.",crawlspace:"I accessed the side sewer line from the crawlspace cleanout.",garage:"I accessed the side sewer line from the garage cleanout.","laundry room":"I accessed the side sewer line from the laundry room cleanout.",outside:"I accessed the side sewer line from the outside cleanout.","pulled toilet":"Since no cleanout was accessible, I pulled the toilet to access the side sewer line.","roof vent":"Since no cleanout was accessible, I accessed the side sewer line from a roof vent."},"end point":{blockage:"The camera was stopped by a blockage.","break":"The camera was stopped by a break in the line.","city main":"The camera reached the city main line.","foreign object":"The camera was stopped by a foreign object in the side sewer line.","max run":"The camera reached the maximum length of the cable before reaching the city main line.",offset:"The camera was stopped by an offset pipe in the side sewer line.",resistance:"The camera was stopped by resistance from multiple bends in the line."},"tie in":{"from above":"The side sewer line is joined by another line from above.","from left":"The side sewer line is joined by another line from the left.","from right":"The side sewer line is joined by another line from the right."},transition:{from:{ABS:"The side sewer line transitioned from ABS ","cast iron":"The side sewer line transitioned from cast iron ","vitrified clay":"The side sewer line transitioned from vitrified clay pipe",concrete:"The side sewer line transitioned from concrete ",copper:"The side sewer line transitioned from copper ",lead:"The side sewer line transitioned from lead ",Orangeburg:"The side sewer line transitioned from Orangeburg ",PVC:"The side sewer line transitioned from PVC ",SDR:"The side sewer line transitioned from SDR ",Transite:"The side sewer line transitioned from Transite "},to:{ABS:"to ABS.","cast iron":"to cast iron.","vitrified clay":"to vitrified clay pipe.",concrete:"to concrete.",copper:"to copper.",lead:"to lead.",Orangeburg:"to Orangeburg.",PVC:"to PVC.",SDR:"to SDR.",Transite:"to Transite."}}}},p=document.getElementsByClassName("js_previewReport")[0],h=document.getElementsByTagName("table")[0],f=h.getElementsByClassName("table_body")[0],g=document.getElementsByClassName("reportFilter__select")[0],y=document.getElementsByClassName("js_saveReport")[0],v=(document.getElementsByClassName("js_sharingForm")[0],document.getElementsByClassName("js_sharingParentNode")[0]),_=document.getElementsByClassName("js_sharingClone"),b=document.getElementsByClassName("js_shareReport")[0],w=document.getElementsByClassName("select__year")[0],T=function(e){var n=Date.now();t.put({_id:n+" error",error_name:e.name,error_message:e.message})["catch"](function(e){console.log(e)})},L=function(){return navigator.onLine},S=function U(){var e,i=document.getElementsByClassName("connectionInfo__internetStatus"),o=document.getElementsByClassName("connectionInfo__databaseStatus"),r=i.length,a=L(),s=t.sync(n,{live:!0,retry:!0}).on("change",function(e){I()}).on("error",function(e){T(e)});for(a||s.cancel(),e=0;r>e;e+=1)i[e].innerHTML=a?"Working Online":"Working Offline",o[e].innerHTML=a?"Saved Remotely and Locally":"Saved Locally";b&&$(),window.addEventListener("online",U),window.addEventListener("offline",U)},j=function(e,t){var n,i=e,o=t;return o?i.className+=" disabled":i.classList.contains("disabled")?i.classList.remove("disabled"):new RegExp("(^| )disabled( |$)","gi").test(i.className)&&(n=i.className,n.replace(" disabled",""),i.className=n),i.disabled=o},k=function(e){return"/"!==location.href.slice(-1)?window.location.pathname+="/"+e:window.location.pathname+=e},q=function(){var e=H();return 1>e?(l.innerHTML="Delete Report",j(l,!0)):1===e?(l.innerHTML="Delete Report",j(l,!1)):(l.innerHTML="Delete Reports",j(l,!1))},C=function(e,t){return new Date(e,t,0).getDate()},E=function(){for(var e=0;e<d.children.length;e+=1)parseInt(d[e].value-1,10)===s&&(d[e].selected=!0);N()},N=function(){for(var e,t=document.createElement("option"),n=C(w.value,d.value),i=n+1;c.lastChild;)c.removeChild(c.lastChild);for(t.innerHTML="&mdash;",t.value="",t.selected=!0,c.appendChild(t),e=1;i>e;e+=1){var o=document.createElement("option");o.value=e,o.innerHTML=e,c.appendChild(o)}},B=function(){var e=0,t=i.length;if(o.checked)for(e=0;t>e;e+=1)i[e].checked=!0;else for(e=0;t>e;e+=1)i[e].checked=!1},H=function(){for(var e=0,t=0;t<i.length;t+=1)i[t].checked&&(e+=1);return e},I=function(){var e,n,i=parseInt(w.value),o=parseInt(d.value),r=parseInt(c.value);i&&o&&r?(e=new Date(i,o-1,r).toISOString(),n=new Date(i,o-1,r+1).toISOString()):i&&o?(e=new Date(i,o-1).toISOString(),n=new Date(i,o).toISOString()):(e=new Date(i).toISOString(),n=(new Date).toISOString()),t.allDocs({include_docs:!0,startkey:e,endkey:n}).then(function(e){for(var t,n=e.rows.length;f.lastChild;)f.removeChild(f.lastChild);for(t=0;n>t;t+=1){var i=document.createElement("tr");i.innerHTML='<td><button class="reportDisplay_open primaryAction" data-id="'+e.rows[t].doc._id+'">Open</button></td>\n<td>'+e.rows[t].doc.customer.inspectionDate+"</td>\n<td>"+e.rows[t].doc.customer.inspectionSite+"</td>\n<td>"+e.rows[t].doc.customer.agent+"</td>\n<td>"+e.rows[t].doc.customer.name+"</td>\n<td>"+e.rows[t].doc.invoice.price+'</td>\n<td class="table_selectContainer"><input class="table_reportSelect" type="checkbox" title="select report"></td>',f.appendChild(i)}return R()})["catch"](function(e){T(e),console.log(e)})},M=function(e){var n=e.target.dataset.id;return t.upsert("_local/edit_id",function(e){return e.edit_id=n,e})["catch"](function(e){T(e),console.log(e)}),k("generator")},D=function(){r.addEventListener("click",function(){t.get("_local/edit_id").then(function(e){return t.remove(e)}).then(function(){return k("generator")})["catch"](function(e){return 404===e.status?k("generator"):(T(e),void console.log(e))})})},A=function(){l.addEventListener("click",function(){for(var e=0;e<i.length;e+=1)i[e].checked&&t.get(i[e].parentNode.parentNode.children[0].children[0].dataset.id).then(function(e){return t.remove(e)})["catch"](function(e){T(e),console.log(e)})})},x=function(){g.addEventListener("change",function(e){var t=e.target.className;return"select__year"===t||"select__month"===t?(N(),I()):I()})},R=function(){var e,t=u.length;for(h.addEventListener("change",function(e){return"INPUT"===e.target.nodeName?("table_reportSelect__all"===e.target.className&&B(),q()):void 0}),e=0;t>e;e+=1)u[e].addEventListener("click",M)},O=function(e){t.upsert(e,W).then(function(){})["catch"](function(e){T(e),console.log(e)})},W=function(){var e={_id:"",company:{name:"",tagline:"",url:""},inspector:{name:"",phone:"",email:""},customer:{inspectionType:"",inspectionDate:"",inspectionSite:"",name:"",agent:""},summary:[],invoice:{quantity:"",item:"",price:""},composition:[],abnormalities:[],legal:[],sharing:[]};return e._id=b.dataset.id,X(e._id),function(){e.company.name=document.querySelector(".company_name").innerHTML,e.company.tagline=document.querySelector(".company_tagline").innerHTML,e.company.url=document.querySelector(".company_url").innerHTML,e.company.logo=document.getElementsByClassName("company_logo")[0].src}(),function(){e.inspector.name=document.querySelector(".inspector_name").children[1].innerHTML,e.inspector.phone=document.querySelector(".inspector_phone").children[1].innerHTML,e.inspector.email=document.querySelector(".inspector_email").children[1].innerHTML}(),function(){e.customer.inspectionType=document.querySelector(".customer_inspectionType").innerHTML,e.customer.inspectionDate=document.querySelector(".customer_inspectionDate").innerHTML,e.customer.inspectionSite=document.querySelector(".customer_site").children[1].innerHTML,e.customer.name=document.querySelector(".customer_name").children[1].innerHTML,e.customer.agent=document.querySelector(".customer_agent").children[1].innerHTML}(),function t(){for(var t=document.querySelectorAll(".summary_paragraph"),n=0;n<t.length;n+=1)e.summary[n]=t[n].innerHTML}(),function(){e.invoice.quantity=document.querySelector(".table_quantity").innerHTML,e.invoice.item=document.querySelector(".table_item").innerHTML,e.invoice.price=document.querySelector(".table_price").innerHTML}(),function n(){for(var n=document.querySelectorAll(".js_compositionClone"),t={},i=0;i<n.length;i+=1){for(var o=0;o<n[i].children.length;o+=1)t[n[i].children[o].children[0].id]=n[i].children[o].children[0].value;for(var r=Object.keys(t),a=!1,s=0;s<r.length;s+=1)""!==t[r[s]]&&(a=!0);a&&(e.composition[i]=t),t={}}}(),function i(){for(var i=document.querySelectorAll(".js_abnormalitiesClone"),t={},n=0;n<i.length;n+=1){for(var o=0;o<i[n].children.length;o+=1)t[i[n].children[o].children[0].id]=i[n].children[o].children[0].value;for(var r=Object.keys(t),a=!1,s=0;s<r.length;s+=1)""!==t[r[s]]&&(a=!0);a&&(e.abnormalities[n]=t),t={}}}(),function o(){for(var o=document.querySelectorAll(".legal_paragraph"),t=0;t<o.length;t+=1)e.legal[t]=o[t].innerHTML}(),function(){for(var t=[],n=0;n<_.length;n+=1)_[n].children[0].value&&t.push(_[n].children[0].value);e.sharing=t}(),e},z=function(e,t){var n=function(e){var t=document.createElement("span"),n=document.createElement("input");t.className="formBlock__inline js_sharingClone fadeIn",t.innerHTML="email",e&&(n.size=e.length,n.value=e),n.className="js_inputWidth formBlock_input input__inline",n.name="email",n.type="email",n.placeholder="email@example.com",t.appendChild(n),v.appendChild(t)},i=function(){var e=document.createElement("span"),t=document.createElement("input");e.className="formBlock__inline js_sharingClone fadeIn",e.innerHTML="email",t.size="15",t.className="js_inputWidth formBlock_input input__inline",t.name="email",t.type="email",t.placeholder="email@example.com",e.appendChild(t),v.appendChild(e)};if(v.addEventListener("input",function(){var e,t=_.length,n=0;for(e=0;t>e;e+=1)""===_[e].children[0].value&&(n+=1);return n||i(),$()}),e){var o,r=e.length;for(o=0;r>o;o+=1)n(e[o]);i(),$()}else i();return t?t():void 0},P=function(){var e;t.get("_local/edit_id").then(function(t){e=t.edit_id}).then(function(){t.get(e).then(function(e){return F(e)})["catch"](function(e){T(e),console.log(e)})})["catch"](function(e){return 404===e.status?F():(T(e),void console.log(e))})},X=function(e){p.href="/integrous-web/reports/"+e,p.className="js_previewReport"},V=function(e){e.preventDefault(),t.upsert(e.target.dataset.id,W).then(function(){t.get(e.target.dataset.id).then(function(e){var t,n=new XMLHttpRequest,i=e.sharing.length,o=[];for(t=0;i>t;t+=1)o.push({email:e.sharing[t]});n.addEventListener("load",function(e){console.log(e.target.response)}),n.open("POST","/integrous-web/reports/generator",!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.send("email="+JSON.stringify(o)+"&link=https://www.inspection.tech/integrous-web/reports/"+e._id)})["catch"](function(e){T(e),console.log(e)})})["catch"](function(e){T(e),console.log(e)})},$=function(){var e,t=L(),n=!0,i=_.length;for(e=0;i>e;e+=1)""!==_[e].children[0].value&&(n=!1);n&&t?j(b,!0):!n&&t?j(b,!1):n||t?n&&!t&&j(b,!0):j(b,!0)};!function(){var e=document.querySelectorAll(".js_inputWidth, .js_inputHeight"),t=document.querySelectorAll(".js_eventDelegation"),n=function(e){var t=15,n=e.target.value.length,i=e.target.size;return n>i?e.target.size=e.target.value.length:i>n&&n>t?e.target.size=e.target.value.length:void(e.target.size=t)},i=function(e){if(e.target.scrollHeight>e.target.clientHeight){var t=e.target.rows;e.target.rows=t+1}else 0===e.target.value.length&&(e.target.rows=2)},o=function(e){switch(e.target.nodeName){case"INPUT":e.target.classList.contains("js_inputWidth")?n(e):new RegExp("(^| )js_inputWidth( |$)","gi").test(e.target.className)&&n(e);break;case"TEXTAREA":i(e);break;default:return!1}};if(0!==e.length)for(var r=0;r<t.length;r+=1)t[r].addEventListener("input",o)}(),function(){!function(){function e(){return l=0}function t(e){var t=e.target.parentNode.children[0].id,n=t.replace(/\D+/g,""),i=Number(n)+1,o=s[s.length-1].cloneNode(!1);return o.className="report_formBlock js_compositionClone fadeIn",o.innerHTML='<span class="formBlock__inline">distance<input size="15" class="js_inputWidth js_generateNew formBlock_input input__inline" id="distanceComp'+i+'" name="distanceComp'+i+'" type="text" placeholder="at x"></span>\n<span class="formBlock__inline">event<input size="15" class="js_inputWidth formBlock_input input__inline" id="eventComp'+i+'" name="eventComp'+i+'" list="eventCompDL" type="text" placeholder="&darr; choose an event"></span>\n<label class="formBlock_label">description<textarea class="js_inputHeight formBlock_textarea" id="descriptionComp'+i+'" name="descriptionComp'+i+'" placeholder="description"></textarea></label>',a.appendChild(o),r()}function n(e){function t(){return s.classList.contains("js_unfolded")||new RegExp("(^| )js_unfolded( |$)","gi").test(s.className)}function n(){for(var e=[],t=0;t<a.children.length;t+=1)(a.children[t].classList.contains("js_unfolded")||new RegExp("(^| )js_unfolded( |$)","gi").test(a.children[t].children[0].className))&&e.push(t);e=e.reverse();for(var n=0;n<e.length;n+=1)a.children[e[n]].remove();return!1}var i,o=e.target.value,a=e.target.parentNode.parentNode,s=e.target.parentNode.nextElementSibling,c=document.createElement("span"),l=s.children[0].id.replace(/\D+/g,"");switch(c.className="js_unfolded formBlock__inline fadeIn",o){case"access point":return i=t(),i?(e.target.value="",n()):(c.innerHTML='type<input size="15" class="js_description js_inputWidth formBlock_input input__inline" id="typeComp'+l+'" name="typeComp'+l+'" list="accessCompDL" type="text" placeholder="&darr; choose a type"></span>',a.insertBefore(c,s),r());case"end point":return i=t(),i?(e.target.value="",n()):(c.innerHTML='type<input size="15" class="js_description js_inputWidth formBlock_input input__inline" id="typeComp'+l+'" name="typeComp'+l+'" list="endCompDL" type="text" placeholder="&darr; choose a type"></span>',a.insertBefore(c,s),r());case"tie in":return i=t(),i?(e.target.value="",n()):(c.innerHTML='direction<input size="15" class="js_description js_inputWidth formBlock_input input__inline" id="directionComp'+l+'" name="directionComp'+l+'" list="tieCompDL" type="text" placeholder="&darr; choose a direction"></span>',a.insertBefore(c,s),r());case"transition":if(i=t())return e.target.value="",n();var d=document.createElement("span"),u=document.createElement("span");return d.className="js_unfolded formBlock__inline fadeIn",u.className="js_unfolded formBlock__inline fadeIn",d.innerHTML='from<input size="15" class="js_description js_inputWidth formBlock_input input__inline" id="fromComp'+l+'" name="fromComp'+l+'" list="matCompDL" type="text" placeholder="&darr; from"></span>',u.innerHTML='to<input size="15" class="js_description js_inputWidth formBlock_input input__inline" id="toComp'+l+'" name="toComp'+l+'" list="matCompDL" type="text" placeholder="&darr; to"></span>',a.insertBefore(d,s),a.insertBefore(u,s),r();default:return n()}}function i(e){function t(e){var t=document.createElement("p");return t.innerHTML=e,t.innerHTML}for(var n=e.target.parentNode.parentNode,i=n.querySelectorAll("input"),o=n.querySelector("textarea"),a="",s="",c=[],l=0;l<i.length;l+=1)c[l]=i[l].value;if("transition"!==c[1]){if("undefined"==typeof m.composition[c[1]]||"undefined"==typeof m.composition[c[1]][c[2]])return!1;a=m.composition[c[1]][c[2]],o.value=t(a)}else if("transition"===c[1]){if("undefined"==typeof m.composition[c[1]]||"undefined"==typeof m.composition[c[1]].from[c[2]]||"undefined"==typeof m.composition[c[1]].to[c[3]])return!1;a=m.composition.transition.from[c[2]],o.value=t(a),s=m.composition.transition.to[c[3]],o.value+=t(s)}return r()}function o(e){return 1>l?(t(e),l+=1):!1}function r(){s=document.querySelectorAll(".js_compositionClone"),c=a.querySelectorAll(".js_description");for(var t=0;t<s.length;t+=1)s[t].removeEventListener("input",o),s[t].children[1].children[0].removeEventListener("focus",e);if(s[s.length-1].addEventListener("input",o),s[s.length-1].children[1].children[0].addEventListener("focus",e),s[s.length-1].children[1].children[0].addEventListener("input",n),"undefined"==typeof c[0])return!1;for(var r=0;r<c.length;r+=1)c[r].addEventListener("input",i);return!1}var a=document.querySelector(".js_compositionParentNode"),s=document.querySelectorAll(".js_compositionClone");if(a)var c=a.querySelectorAll(".js_description");var l=0;return 0!==s.length?r():!1}(),function(){function e(){return c=0}function t(e){var t=e.target.parentNode.children[0].id,n=t.replace(/\D+/g,""),i=Number(n)+1,s=a[a.length-1].cloneNode(!1);return s.className="report_formBlock js_abnormalitiesClone fadeIn",s.innerHTML='<span class="formBlock__inline">distance<input size="15" class="js_inputWidth js_generateNew formBlock_input input__inline" id="distanceAbnorm'+i+'" name="distanceAbnorm'+i+'" type="text" placeholder="at x / from x to x"></span>\n<span class="formBlock__inline">event<input size="15" class="js_description js_inputWidth formBlock_input input__inline" id="eventAbnorm'+i+'" name="eventAbnorm'+i+'" list="eventAbnormDL" type="text" placeholder="&darr; choose an event"></span>\n<span class="formBlock__inline">grade<input size="15" class="js_description js_inputWidth formBlock_input input__inline" id="gradeAbnorm'+i+'" name="gradeAbnorm'+i+'" list="gradeAbnormDL"" type="text" placeholder="&darr; choose a grade"></span>\n<label class="formBlock_label">description<textarea class="js_inputHeight formBlock_textarea" id="descriptionAbnorm'+i+'" name="descriptionAbnorm'+i+'" placeholder="description"></textarea></label>',r.appendChild(s),o()}function n(e){function t(e){var t=document.createElement("p");return t.innerHTML=e,t.innerHTML}for(var n=e.target.parentNode.parentNode,i=n.querySelectorAll("input"),r=n.querySelector("textarea"),a="",s=[],c=0;c<i.length;c+=1)s[c]=i[c].value;return"undefined"==typeof m.abnormality[s[1]]||"undefined"==typeof m.abnormality[s[1]][s[2]]?!1:(a=m.abnormality[s[1]][s[2]].description,r.value=t(a),o())}function i(e){return 1>c?(t(e),c+=1):!1}function o(){a=document.querySelectorAll(".js_abnormalitiesClone"),s=r.querySelectorAll(".js_description");for(var t=0;t<a.length;t+=1)a[t].removeEventListener("input",i),a[t].children[1].children[0].removeEventListener("focus",e);return a[a.length-1].addEventListener("input",i),a[a.length-1].children[1].children[0].addEventListener("focus",e),s[s.length-2].addEventListener("input",n),s[s.length-1].addEventListener("input",n),!1}var r=document.querySelector(".js_abnormalitiesParentNode"),a=document.querySelectorAll(".js_abnormalitiesClone");if(r)var s=r.querySelectorAll(".js_description");var c=0;return 0!==a.length?o():!1}()}();var F=function(t){t?(e(t),z(t.sharing)):z()};if(r)try{S(),E(),I(),q(),D(),A(),x()}catch(G){T(G),console.log(G)}if(b){b.dataset.id||(b.dataset.id=(new Date).toISOString());try{S(),P(),b.addEventListener("click",V),y.addEventListener("click",function(){O(b.dataset.id)})}catch(G){T(G),console.log(G)}}};ready(readyWrap);
//# sourceMappingURL=main.min.js.map
