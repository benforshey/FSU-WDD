!function($){"use strict";var t=0,e=0,o=0,a=0,s=function(t){t.fadeToggle()},n=function(){document.getElementById("userName")&&$.getJSON("xhr/check_login.php",function(t){var e=t.user.user_n;$("#userName").html(e),o=t.user.teamID})},r=function(){return Math.floor(Math.random()*(1e8-1))+1},i=function(){$.ajax({url:"xhr/get_projects.php",type:"get",dataType:"json",success:function(t){var e=0,o=t.projects.length;for(o;o>e;e+=1){var a=t.projects[e].projectName,s=t.projects[e].status,n=t.projects[e].dueDate,r=t.projects[e].projectDescription,i=t.projects[e].id;$('<div id="'+i+'" class="project ui-state-default"><h3 class="projectTitle">'+a+'<span class="projectStatus"> ('+s+') </span></h3><h4 class="projectDueDate">'+n+'</h4><p class="projectDescription">'+r+'</p><button class="projectEdit primary">Edit Project</button><button class="projectRemove secondary">Remove Project</button></div>').appendTo(".projectContainer")}}}),$("#addProjectForm").on("submit",function(e){e.preventDefault();var o=$("#projectName").val(),a=$("#projectDescription").val(),s=$("#projectDueDate").val(),n=$('input[name="projectStatus"]:checked').val();$.ajax(0===t?{url:"xhr/new_project.php",type:"post",dataType:"json",data:{projectName:o,projectDescription:a,dueDate:s,status:n},success:function(t){window.location.reload(!0)}}:{url:"xhr/update_project.php",type:"post",dataType:"json",data:{projectName:o,projectDescription:a,dueDate:s,status:n,projectID:t},success:function(e){t=0,window.location.reload(!0)}})}),$(document).on("click",".projectEdit",function(e){e.preventDefault(),$("#submitAddProjectForm").html("Edit Project");var o=$(this).parent("div").attr("id");$.ajax({url:"xhr/get_projects.php",type:"get",dataType:"json",success:function(e){var a=0,s=e.projects.length;for(s;s>a;a+=1)if(o===e.projects[a].id){t=e.projects[a].id;var n={name:e.projects[a].projectName,status:e.projects[a].status,dueDate:e.projects[a].dueDate,description:e.projects[a].projectDescription,databaseId:e.projects[a].id};$("#projectName").val(n.name),$("#projectDescription").val(n.description),$("#projectDueDate").val(n.dueDate),$('input:radio[value="'+n.status+'"]').prop("checked",!0)}}}),s($(".modalContainer"))}),$(document).on("click",".projectRemove",function(t){t.preventDefault();var e=$(this).parent("div").attr("id");$.ajax({url:"xhr/delete_project.php",data:{projectID:e},type:"post",dataType:"json",success:function(t){window.location.reload(!0)}})})},c=function(){$.ajax({url:"xhr/get_projects.php",type:"get",dataType:"json",success:function(t){var e=0,o=t.projects.length;for(o;o>e;e+=1){var a=t.projects[e].projectName,s=t.projects[e].id;$('<option value="'+s+'">'+a+"</option>").appendTo("#associatedProject")}}}),$.ajax({url:"xhr/get_tasks.php",type:"get",dataType:"json",success:function(t){var e=0,o=t.tasks.length;for(o;o>e;e+=1){var a=t.tasks[e].taskName,s=t.tasks[e].taskDescription,n=t.tasks[e].id,r=t.tasks[e].projectID,i=t.tasks[e].projectName;$('<div id="'+n+'" class="note ui-state-default"><h3 class="noteName">'+a+'</h3><h4 class="projectName">Associated Project: '+i+'</h4><p class="noteBody">'+s+'</p><button class="noteEdit primary">Edit Note</button><button class="noteRemove secondary">Remove Note</button></div>').appendTo(".noteContainer")}}}),$("#addNoteForm").on("submit",function(t){t.preventDefault();var o=$("#noteName").val(),a=$("#noteBody").val(),s=$("#associatedProject").val(),n="active";$.ajax(0===e?{url:"xhr/new_task.php",type:"post",dataType:"json",data:{taskName:o,taskDescription:a,projectID:s,status:n},success:function(t){window.location.reload(!0)}}:{url:"xhr/update_task.php",type:"post",dataType:"json",data:{taskName:o,taskDescription:a,taskID:e,projectID:s,status:n},success:function(t){e=0,window.location.reload(!0)}})}),$(document).on("click",".noteEdit",function(t){t.preventDefault(),$("#submitAddNoteForm").html("Edit Note");var o=$(this).parent("div").attr("id");$.ajax({url:"xhr/get_tasks.php",type:"get",dataType:"json",success:function(t){var a=0,s=t.tasks.length;for(s;s>a;a+=1)if(o===t.tasks[a].id){e=t.tasks[a].id;var n={name:t.tasks[a].taskName,description:t.tasks[a].taskDescription,databaseId:t.tasks[a].projectID};$("#noteName").val(n.name),$("#noteBody").val(n.description),$("#associatedProject").val(n.databaseId)}}}),s($(".modalContainer"))}),$(document).on("click",".noteRemove",function(t){t.preventDefault();var e=$(this).parent("div").attr("id");$.ajax({url:"xhr/delete_task.php",data:{taskID:e},type:"post",dataType:"json",success:function(t){window.location.reload(!0)}})})},p=function(){$.ajax({url:"xhr/get_user_list.php",type:"get",dataType:"json",success:function(t){var e=0,a=t.users.length;for(a;a>e;e+=1){var s=t.users[e].user_n,n=t.users[e].avatar,r=t.users[e].teamID,i=t.users[e].id;o===r&&$('<div id="'+i+'" class="user ui-state-default"><h3 class="userName">'+s+'</h3><h4 class="userRoles">Role: '+n+'</h4><button class="userEdit primary">Edit User</button><button class="userRemove></button></div>').appendTo(".userContainer")}}})};$(document).ready(function(){$("#loginForm").submit(function(t){t.preventDefault();var e=$("#loginUserName").val(),o=$("#loginPassword").val(),a=$("#topYenoh-1").val(),s=$("#loginForm").find("label"),n=function(t){t.error?s.addClass("warning formError").text(t.error):window.location.href="dashboard.html"};a||$.ajax({url:"xhr/login.php",type:"POST",dataType:"json",data:{username:e,password:o},success:n})}),$("#signupForm").submit(function(t){t.preventDefault();var e=$("#topYenoh-2").val(),o=$("#signupEmail").val(),a=$("#signupUserName").val(),s=$("#signupPassword").val(),n=$("#signupConfirmPassword").val(),r=function(){return s!==n?($("#statusConfirmPassword").addClass("formError").html("Your passwords do not match."),!1):!0},i=function(t){t.error?window.alert(t.error):window.location.href="dashboard.html"},c=r();return e||!c?!1:void $.ajax({url:"xhr/register.php",type:"post",dataType:"json",data:{email:o,username:a,password:s,avatar:"Admin"},success:i})}),$("#logoutSubmit").click(function(t){t.preventDefault();var e=function(){window.location.href="index.html"};$.ajax({url:"xhr/logout.php",success:e})}),$("#dashboardButton").click(function(t){t.preventDefault(),window.location.href="dashboard.html"}),$("#adminButton").click(function(t){t.preventDefault(),window.location.href="administration.html"}),$("#projectsButton").click(function(t){t.preventDefault(),window.location.href="projects.html"}),$("#notesButton").click(function(t){t.preventDefault(),window.location.href="notes.html"}),$("#tabNav").find("ul").find("li").on("click",function(t){t.preventDefault();var e=$(this).find("a").attr("href"),o=$(this).find("a");$("#panelWrapper").find("div").removeClass("displayed"),$("#tabNav").find("a").removeClass("active"),$(o).addClass("active"),$(e).addClass("displayed")}),$("*[title]").hover(function(){var t=$(this).attr("title");$(this).data("toolTipText",t).removeAttr("title"),$('<p class="toolTip"></p>').text(t).appendTo("body").fadeIn("slow")},function(){$(this).attr("title",$(this).data("toolTipText")),$(".toolTip").remove()}).mousemove(function(t){var e=0,o=0,a=$(window).height(),s=$(window).width(),n=t.pageY,r=t.pageX;e=n>a/2?-140:5,o=r>s/2?-200:10,$(".toolTip").css({top:n+e+"px",left:r+o+"px"})}),$(".closeModal").on("click",function(t){t.preventDefault(),s($(".modalContainer"))}),$("#addProject").on("click",function(t){t.preventDefault(),s($(".modalContainer"))}),$("#addNote").on("click",function(t){t.preventDefault(),s($(".modalContainer"))}),$("#addUser").on("click",function(t){t.preventDefault(),s($(".modalContainer"))}),$(".statusImage").mouseover(function(){$(this).fadeTo(100,.5)}),$(".statusImage").mouseleave(function(){$(this).fadeTo(100,1)}),$(document).ajaxError(function(t,e,o,a){window.console.log("An AJAX error has occurred. The event will be shown first; the error will be shown second."),window.console.log(t),window.console.log(a)})}),n(),i(),c(),p(),$(function(){$("#sortable").sortable({placeholder:"ui-state-highlight",forcePlaceholderSize:!0}),$("#sortable").disableSelection()}),$(function(){$("#projectDueDate").datepicker({showOtherMonths:!0,selectOtherMonths:!0,changeMonth:!0,changeYear:!0})}),$(function(){$("#resizable").resizable({maxHeight:1024,maxWidth:960,minHeight:580,minWidth:540})})}(jQuery);